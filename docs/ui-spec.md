# Multi-Agent 桌面客户端 UI 规格（UI Spec）

## 1. 设计目标

- 专业、克制、信息密度高（开发者工具风格）
- 默认深色主题，保证长时间阅读舒适
- 核心路径最短：选 Provider → 选路径 → 进入对话
- 会话可持续：可保存、可回看、可检索

---

## 2. 页面结构

## 2.1 启动页（Launch Pad）

### 区域

1. 顶部 Provider Tabs
2. 工作区选择区（文件/文件夹）
3. 最近项目区
4. 主操作区（进入对话）

### 交互

- Tab：`Claude Code` / `Codex` / `Gemini` / `Custom API`
- 未配置 Provider 时，Tab 右上显示警示点并提示“前往设置”
- 允许“空工作区进入”（轻对话模式）

---

## 2.2 对话页（三栏工作台）

默认比例：`1 : 3 : 1`

- 左栏：会话列表（可折叠）
- 中栏：对话主区
- 右栏：工作区文件预览（可隐藏）

### 响应式

- 宽屏（>= 1440）：三栏常驻
- 中屏（1024~1439）：允许右栏默认折叠
- 小屏（< 1024）：左右栏改抽屉

---

## 3. 左栏规格（会话列表）

## 3.1 组件

- 新建会话按钮
- 搜索输入框
- 会话列表（按时间分组：今天/7天内/更早）
- 折叠按钮（折叠后仅图标）

## 3.2 单条会话信息

- 标题
- Provider 图标
- 更新时间
- 状态标记：置顶 / 归档 / 未读

## 3.3 会话操作菜单

- 重命名
- 置顶/取消置顶
- 归档/取消归档
- 复制会话
- 导出会话（MD/JSON）
- 删除

---

## 4. 中栏规格（对话区）

## 4.1 消息流

- 用户消息卡片
- 助手消息卡片（流式渲染）
- 工具调用卡片（可折叠）
- 错误卡片（可重试）

## 4.2 输入区

- 多行输入框
- 发送按钮
- 停止生成按钮（流式中显示）
- 附加上下文入口（文件/固定消息）

## 4.3 快捷操作

- 重新生成上一轮
- 继续追问
- 复制消息
- 跳转到上一轮工具调用

---

## 5. 右栏规格（工作区与预览）

## 5.1 文件树

- 目录展开/收起
- 文件筛选
- 右键菜单：加入上下文/在系统打开/复制路径

## 5.2 预览区

- 文本、Markdown、图片预览
- 超大文件显示“仅预览前 N 行”
- 错误文件类型提示

## 5.3 二合一按钮

- 隐藏后保留一个浮动入口按钮
- 展开后恢复上次宽度与滚动位置

---

## 6. 设置页规格

## 6.1 CLI 外观设置

- 字体族
- 字号
- 行高
- 颜色主题（Dark/Light/Custom）
- 光标样式（Block/Bar/Underline）

## 6.2 Custom API 设置

- Base URL
- API Key
- Model
- Temperature / Top P / Max Tokens
- 自定义 Header（key-value）

## 6.3 数据与会话设置

- 自动保存开关
- 自动保存间隔
- 启动时恢复上次会话开关
- 历史保留策略（按天数/条数）

---

## 7. 会话保存与上文回看（重点）

## 7.1 自动保存策略

- 发送后立即保存用户消息
- 助手流式增量按节流策略保存（如 500ms）
- 助手完成时做最终一致化保存

## 7.2 回看能力

- 消息区支持历史分页加载
- 会话内搜索并高亮命中
- “固定到上下文”按钮将消息加入固定区
- 上下文面板显示：最近轮次 + 固定消息 + 文件片段

## 7.3 恢复行为

- 启动后恢复上次打开会话
- 恢复滚动位置与光标位置
- 若会话损坏，自动回退到最近可用快照

---

## 8. 可用性与可访问性

- 关键按钮提供 Tooltip
- 支持完整键盘导航与快捷键
- 对比度满足基础可读性（暗色下正文 >= 4.5:1）
- 可设置 UI 缩放比例（90%~125%）

---

## 9. 快捷键建议

- `Ctrl/Cmd + N`：新建会话
- `Ctrl/Cmd + K`：会话搜索
- `Ctrl/Cmd + S`：手动保存会话
- `Ctrl/Cmd + B`：折叠/展开左栏
- `Ctrl/Cmd + ]`：折叠/展开右栏
- `Enter`：发送，`Shift + Enter`：换行

